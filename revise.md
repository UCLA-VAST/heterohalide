# New
## Rules
1. need to add a "final stage" which is equal to the last stage, because the last stage in Halide IR doesn't have a Realize node so that we can't know its Type information. To make the last two stage totally equal, we just copy from the Type information from the "second to last" stage for the "final stage". 

2. Temporary Solution
To deal with "Final stage", one solution is: we collect information in "Realize", and print hcl.compute(lambda: 0) in Producer      

This works if "Produce" and "Realize" always occur at the same time.    
Still, I need to clean the code in "Realize" (haven't yet)  



## Write HeteroCL code manually with Imperative DSL
### Works
1. blur
2. conv
3. linear_blur
4. stencil_chain

### Have Bugs
1. Harris
Compare the results, again the bug comes from "cim" operation. I think this comes from type transformation, so we just ignore it for now. It is not related to the new transformation rules. 

## New Transformation Rules
### Folders and Files
1. xxx_target.py
目标的Imperative DSL生成HeteroCL代码
2. xxx_generate.py
HeteroCL code generated by original transformation rules
3. xxx_gen.py
HeteroCL code generated by new transformation rules

### Change Nodes
1. Realize
2. ProducerConsumer
3. For
4. Call
5. Provide
6. Let

### Testcases
1. Blur (done)
2. Linear_blur (done)
3. Conv (done)
4. Stencil (done)

### Map to FPGA and get performance results
