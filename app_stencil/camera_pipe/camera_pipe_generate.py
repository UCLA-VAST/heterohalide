import heterocl as hcl
hcl.init()
processed_extent_0 = 2560
processed_extent_1 = 1920
processed_extent_2 = 3
processed_min_0 = 0
processed_min_1 = 0
processed_min_2 = 0
def top(b0, ):
    processed_total_extent_1 = (hcl.cast(dtype = hcl.Int(bits = 64), expr = processed_extent_1) * hcl.cast(dtype = hcl.Int(bits = 64), expr = processed_extent_0))
    processed_total_extent_2 = (processed_total_extent_1 * hcl.cast(dtype = hcl.Int(bits = 64), expr = processed_extent_2))
    shifted = hcl.compute(((processed_extent_1 + 8), (processed_extent_2 + 8)), lambda x, y: 0, name = "shifted", dtype = hcl.UInt(bits = 16))
    with hcl.Stage("shifted"):
        with hcl.for_((processed_min_2 + 8), (processed_extent_2 + 8), name = "shifted_s0_y") as shifted_s0_y:
            with hcl.for_((processed_min_1 + 12), (processed_extent_1 + 8), name = "shifted_s0_x") as shifted_s0_x:
                shifted[shifted_s0_x, shifted_s0_y] = b0[shifted_s0_x, shifted_s0_y]
    denoised__1 = hcl.compute(((processed_extent_1 + 4), (processed_extent_2 + 4)), lambda x, y: 0, name = "denoised__1", dtype = hcl.UInt(bits = 16))
    with hcl.Stage("denoised__1"):
        with hcl.for_((processed_min_2 + -2), (processed_extent_2 + 4), name = "denoised__1_s0_y") as denoised__1_s0_y:
            with hcl.for_((processed_min_1 + -2), (processed_extent_1 + 4), name = "denoised__1_s0_x") as denoised__1_s0_x:
                t2673 = shifted[(denoised__1_s0_x + 14), (denoised__1_s0_y + 12)]
                t2674 = shifted[(denoised__1_s0_x + 18), (denoised__1_s0_y + 12)]
                t2675 = shifted[(denoised__1_s0_x + 16), (denoised__1_s0_y + 10)]
                t2676 = shifted[(denoised__1_s0_x + 16), (denoised__1_s0_y + 14)]
                denoised__1[denoised__1_s0_x, denoised__1_s0_y] = hcl.select(hcl.select(shifted[(denoised__1_s0_x + 16), (denoised__1_s0_y + 12)] < hcl.select(hcl.select(hcl.select(t2673 > t2674, t2673, t2674) > t2675, hcl.select(t2673 > t2674, t2673, t2674), t2675) > t2676, hcl.select(hcl.select(t2673 > t2674, t2673, t2674) > t2675, hcl.select(t2673 > t2674, t2673, t2674), t2675), t2676), shifted[(denoised__1_s0_x + 16), (denoised__1_s0_y + 12)], hcl.select(hcl.select(hcl.select(t2673 > t2674, t2673, t2674) > t2675, hcl.select(t2673 > t2674, t2673, t2674), t2675) > t2676, hcl.select(hcl.select(t2673 > t2674, t2673, t2674) > t2675, hcl.select(t2673 > t2674, t2673, t2674), t2675), t2676)) > hcl.select(hcl.select(hcl.select(t2673 < t2674, t2673, t2674) < t2675, hcl.select(t2673 < t2674, t2673, t2674), t2675) < t2676, hcl.select(hcl.select(t2673 < t2674, t2673, t2674) < t2675, hcl.select(t2673 < t2674, t2673, t2674), t2675), t2676), hcl.select(shifted[(denoised__1_s0_x + 16), (denoised__1_s0_y + 12)] < hcl.select(hcl.select(hcl.select(t2673 > t2674, t2673, t2674) > t2675, hcl.select(t2673 > t2674, t2673, t2674), t2675) > t2676, hcl.select(hcl.select(t2673 > t2674, t2673, t2674) > t2675, hcl.select(t2673 > t2674, t2673, t2674), t2675), t2676), shifted[(denoised__1_s0_x + 16), (denoised__1_s0_y + 12)], hcl.select(hcl.select(hcl.select(t2673 > t2674, t2673, t2674) > t2675, hcl.select(t2673 > t2674, t2673, t2674), t2675) > t2676, hcl.select(hcl.select(t2673 > t2674, t2673, t2674) > t2675, hcl.select(t2673 > t2674, t2673, t2674), t2675), t2676)), hcl.select(hcl.select(hcl.select(t2673 < t2674, t2673, t2674) < t2675, hcl.select(t2673 < t2674, t2673, t2674), t2675) < t2676, hcl.select(hcl.select(t2673 < t2674, t2673, t2674) < t2675, hcl.select(t2673 < t2674, t2673, t2674), t2675), t2676))
    demosaiced__1 = hcl.compute((processed_extent_1, processed_extent_2, 3), lambda x, y, z: 0, name = "demosaiced__1", dtype = hcl.UInt(bits = 16))
    with hcl.Stage("demosaiced__1"):
        with hcl.for_(0, 3, name = "demosaiced__1_s0_c") as demosaiced__1_s0_c:
            with hcl.for_(processed_min_2, processed_extent_2, name = "demosaiced__1_s0_y") as demosaiced__1_s0_y:
                with hcl.for_(processed_min_1, processed_extent_1, name = "demosaiced__1_s0_x") as demosaiced__1_s0_x:
                    t2677 = ((demosaiced__1_s0_y % 2) == 0)
                    t2678 = ((demosaiced__1_s0_x % 2) == 0)
                    t2679 = denoised__1[demosaiced__1_s0_x, demosaiced__1_s0_y]
                    t2680 = denoised__1[(demosaiced__1_s0_x + 2), demosaiced__1_s0_y]
                    t2681 = denoised__1[(demosaiced__1_s0_x + 1), (demosaiced__1_s0_y + -1)]
                    t2682 = denoised__1[(demosaiced__1_s0_x + 1), (demosaiced__1_s0_y + 1)]
                    t2687 = denoised__1[(demosaiced__1_s0_x + -2), demosaiced__1_s0_y]
                    t2688 = denoised__1[(demosaiced__1_s0_x + -1), (demosaiced__1_s0_y + -1)]
                    t2689 = denoised__1[(demosaiced__1_s0_x + -1), (demosaiced__1_s0_y + 1)]
                    t2693 = denoised__1[(demosaiced__1_s0_x + -1), demosaiced__1_s0_y]
                    t2695 = denoised__1[(demosaiced__1_s0_x + 1), demosaiced__1_s0_y]
                    t2697 = (hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2693) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2695))
                    t2698 = denoised__1[demosaiced__1_s0_x, (demosaiced__1_s0_y + 1)]
                    t2699 = denoised__1[demosaiced__1_s0_x, (demosaiced__1_s0_y + -1)]
                    t2702 = (hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2698) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2699))
                    # t2703 = hcl.select((absd(t2693, t2695,  < absd(t2698, t2699, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = ((t2697 + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = ((t2702 + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))
                    t2704 = denoised__1[(demosaiced__1_s0_x + 2), (demosaiced__1_s0_y + -1)]
                    t2705 = denoised__1[(demosaiced__1_s0_x + 1), (demosaiced__1_s0_y + -2)]
                    t2708 = denoised__1[(demosaiced__1_s0_x + -2), (demosaiced__1_s0_y + 1)]
                    t2709 = denoised__1[(demosaiced__1_s0_x + -1), (demosaiced__1_s0_y + 2)]
                    t2712 = denoised__1[(demosaiced__1_s0_x + -2), (demosaiced__1_s0_y + -1)]
                    t2713 = denoised__1[(demosaiced__1_s0_x + -1), (demosaiced__1_s0_y + -2)]
                    t2716 = denoised__1[(demosaiced__1_s0_x + 2), (demosaiced__1_s0_y + 1)]
                    t2717 = denoised__1[(demosaiced__1_s0_x + 1), (demosaiced__1_s0_y + 2)]
                    t2720 = denoised__1[demosaiced__1_s0_x, (demosaiced__1_s0_y + -2)]
                    t2722 = denoised__1[demosaiced__1_s0_x, (demosaiced__1_s0_y + 2)]
                    t2724 = (hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2699) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2698))
                    t2725 = hcl.select((absd(t2695, t2693,  < absd(t2699, t2698, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2695) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2693)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = ((t2724 + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))
                    demosaiced__1[demosaiced__1_s0_x, demosaiced__1_s0_y, demosaiced__1_s0_c] = hcl.select((demosaiced__1_s0_c == 0), hcl.select(t2677, hcl.select(t2678, ((t2679 - hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2680, t2679,  < absd(t2681, t2682, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2680) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2679)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2681) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2682)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2679, t2687,  < absd(t2688, t2689, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2679) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2687)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2688) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2689)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))) + hcl.cast(dtype = hcl.UInt(bits = 16), expr = ((t2697 + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))), t2679), hcl.select(t2678, hcl.select((absd(t2681, t2689,  < absd(t2688, t2682, ), ((t2703 - hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2704, t2699,  < absd(t2705, t2695, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2704) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2699)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2705) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2695)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2698, t2708,  < absd(t2693, t2709, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2698) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2708)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2693) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2709)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))) + hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2681) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2689)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))), ((t2703 - hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2699, t2712,  < absd(t2713, t2693, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2699) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2712)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2713) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2693)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2716, t2698,  < absd(t2695, t2717, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2716) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2698)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2695) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2717)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))) + hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2688) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2682)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))), ((t2679 - hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2681, t2688,  < absd(t2720, t2679, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2681) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2688)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2720) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2679)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2682, t2689,  < absd(t2679, t2722, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2682) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2689)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2679) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2722)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))) + hcl.cast(dtype = hcl.UInt(bits = 16), expr = ((t2724 + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))), hcl.select((demosaiced__1_s0_c == 1), hcl.select(t2677, hcl.select(t2678, t2679, t2725), hcl.select(t2678, t2703, t2679)), hcl.select(t2677, hcl.select(t2678, ((t2679 - hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2689, t2682,  < absd(t2722, t2679, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2689) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2682)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2722) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2679)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2688, t2681,  < absd(t2679, t2720, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2688) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2681)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2679) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2720)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))) + hcl.cast(dtype = hcl.UInt(bits = 16), expr = ((t2702 + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))), hcl.select((absd(t2689, t2681,  < absd(t2682, t2688, ), ((t2725 - hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2708, t2698,  < absd(t2709, t2693, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2708) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2698)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2709) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2693)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2699, t2704,  < absd(t2695, t2705, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2699) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2704)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2695) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2705)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))) + hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2689) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2681)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))), ((t2725 - hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2698, t2716,  < absd(t2717, t2695, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2698) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2716)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2717) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2695)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2712, t2699,  < absd(t2693, t2713, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2712) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2699)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2693) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2713)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))) + hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2682) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2688)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))), hcl.select(t2678, t2679, ((t2679 - hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2687, t2679,  < absd(t2689, t2688, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2687) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2679)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2689) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2688)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = hcl.select((absd(t2679, t2680,  < absd(t2682, t2681, ), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2679) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2680)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))), hcl.cast(dtype = hcl.UInt(bits = 16), expr = (((hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2682) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = t2681)) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))))) + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2)))) + hcl.cast(dtype = hcl.UInt(bits = 16), expr = ((t2697 + hcl.cast(dtype = hcl.UInt(bits = 32), expr = 1))//hcl.cast(dtype = hcl.UInt(bits = 32), expr = 2))))))))
    corrected__1 = hcl.compute((processed_extent_1, processed_extent_2, processed_extent_0), lambda x, y, z: 0, name = "corrected__1", dtype = hcl.Int(bits = 16))
    with hcl.Stage("corrected__1"):
        with hcl.for_(processed_min_0, processed_extent_0, name = "corrected__1_s0_c") as corrected__1_s0_c:
            with hcl.for_(processed_min_2, processed_extent_2, name = "corrected__1_s0_y") as corrected__1_s0_y:
                with hcl.for_(processed_min_1, processed_extent_1, name = "corrected__1_s0_x") as corrected__1_s0_x:
                    t2726_s = demosaiced__1[corrected__1_s0_x, corrected__1_s0_y, 2]
                    t2727_s = demosaiced__1[corrected__1_s0_x, corrected__1_s0_y, 0]
                    t2728_s = demosaiced__1[corrected__1_s0_x, corrected__1_s0_y, 1]
                    corrected__1[corrected__1_s0_x, corrected__1_s0_y, corrected__1_s0_c] = hcl.select((corrected__1_s0_c == 0), hcl.cast(dtype = hcl.Int(bits = 16), expr = ((((hcl.cast(dtype = hcl.Int(bits = 32), expr = t2726_s) * 7) + ((hcl.cast(dtype = hcl.Int(bits = 32), expr = t2727_s) * 548) - (hcl.cast(dtype = hcl.Int(bits = 32), expr = t2728_s) * 103))) + -10220)//256)), hcl.select((corrected__1_s0_c == 1), hcl.cast(dtype = hcl.Int(bits = 16), expr = ((((hcl.cast(dtype = hcl.Int(bits = 32), expr = t2726_s) * 61) + ((hcl.cast(dtype = hcl.Int(bits = 32), expr = t2728_s) * 373) - (hcl.cast(dtype = hcl.Int(bits = 32), expr = t2727_s) * 96))) + -7254)//256)), hcl.cast(dtype = hcl.Int(bits = 16), expr = ((((hcl.cast(dtype = hcl.Int(bits = 32), expr = t2726_s) * 882) + ((hcl.cast(dtype = hcl.Int(bits = 32), expr = t2728_s) * -260) - (hcl.cast(dtype = hcl.Int(bits = 32), expr = t2727_s) * 30))) + -5562)//256))))
    hw_output__1 = hcl.compute((processed_extent_0, processed_extent_1, processed_extent_2), lambda x, y, z: 0, name = "hw_output__1", dtype = hcl.UInt(bits = 8))
    with hcl.Stage("hw_output__1"):
        with hcl.for_(processed_min_2, processed_extent_2, name = "hw_output__1_s0_y") as hw_output__1_s0_y:
            with hcl.for_(processed_min_1, processed_extent_1, name = "hw_output__1_s0_x") as hw_output__1_s0_x:
                with hcl.for_(processed_min_0, processed_extent_0, name = "hw_output__1_s0_c") as hw_output__1_s0_c:
                    t2729 = corrected__1[hw_output__1_s0_x, hw_output__1_s0_y, hw_output__1_s0_c]
                    t2730 = hcl.power((hcl.cast(dtype = hcl.Float(bits = 32), expr = hcl.cast(dtype = hcl.Int(bits = 32), expr = hcl.select(hcl.select(t2729 < hcl.cast(dtype = hcl.Int(bits = 16), expr = 1023), t2729, hcl.cast(dtype = hcl.Int(bits = 16), expr = 1023)) > hcl.cast(dtype = hcl.Int(bits = 16), expr = 0), hcl.select(t2729 < hcl.cast(dtype = hcl.Int(bits = 16), expr = 1023), t2729, hcl.cast(dtype = hcl.Int(bits = 16), expr = 1023)), hcl.cast(dtype = hcl.Int(bits = 16), expr = 0)))) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.000977)), hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.500000))
                    hw_output__1[hw_output__1_s0_c, hw_output__1_s0_x, hw_output__1_s0_y] = hcl.select((t2729 < hcl.cast(dtype = hcl.Int(bits = 16), expr = 0)), hcl.cast(dtype = hcl.UInt(bits = 8), expr = 0), hcl.select((t2729 < hcl.cast(dtype = hcl.Int(bits = 16), expr = 1024)), hcl.cast(dtype = hcl.UInt(bits = 8), expr = hcl.select(hcl.select((hcl.select((hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.500000) < t2730), (hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - ((((hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730) * (hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730)) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.828427)) + ((hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.585786)))), (((t2730 * t2730) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.828427)) + (t2730 * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.585786)))) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 256.000000)) < hcl.cast(dtype = hcl.Float(bits = 32), expr = 255.000000), (hcl.select((hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.500000) < t2730), (hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - ((((hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730) * (hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730)) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.828427)) + ((hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.585786)))), (((t2730 * t2730) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.828427)) + (t2730 * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.585786)))) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 256.000000)), hcl.cast(dtype = hcl.Float(bits = 32), expr = 255.000000)) > hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.000000), hcl.select((hcl.select((hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.500000) < t2730), (hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - ((((hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730) * (hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730)) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.828427)) + ((hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.585786)))), (((t2730 * t2730) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.828427)) + (t2730 * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.585786)))) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 256.000000)) < hcl.cast(dtype = hcl.Float(bits = 32), expr = 255.000000), (hcl.select((hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.500000) < t2730), (hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - ((((hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730) * (hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730)) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.828427)) + ((hcl.cast(dtype = hcl.Float(bits = 32), expr = 1.000000) - t2730) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.585786)))), (((t2730 * t2730) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.828427)) + (t2730 * hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.585786)))) * hcl.cast(dtype = hcl.Float(bits = 32), expr = 256.000000)), hcl.cast(dtype = hcl.Float(bits = 32), expr = 255.000000)), hcl.cast(dtype = hcl.Float(bits = 32), expr = 0.000000))), hcl.cast(dtype = hcl.UInt(bits = 8), expr = 255)))
    processed = hcl.compute((2560, 1920, 3), lambda x, y, z: 0, name = "processed", dtype = hcl.UInt(bits = 8))
    with hcl.Stage("processed"):
        with hcl.for_(processed_min_2, processed_extent_2, name = "processed_s0_c") as processed_s0_c:
            with hcl.for_(processed_min_1, processed_extent_1, name = "processed_s0_y") as processed_s0_y:
                with hcl.for_(processed_min_0, processed_extent_0, name = "processed_s0_x") as processed_s0_x:
                    processed[processed_s0_x, processed_s0_y, processed_s0_c] = hw_output__1[processed_s0_x, processed_s0_y, processed_s0_c]
    return processed
b0 = hcl.placeholder((2592, 1968, ), name = "b0", dtype = hcl.UInt(bits = 16))
s = hcl.create_schedule([b0, ], top)
f = hcl.build(s)
print(hcl.lower(s))
# import numpy as np
# np_b0 = np.load("b0.npy")
# hcl_b0 = hcl.asarray(np_b0, dtype = hcl.UInt(bits = 16))
# output_shape = (2560, 1920, 3, )
# hcl_out = hcl.asarray(np.zeros(output_shape), dtype = hcl.UInt(bits = 8))
# f(hcl_b0, hcl_out)
# np_out = hcl_out.asnumpy()
# np.save("output_heterocl.npy", np_out)
# print(hcl.build(s, target = "soda"))
